---
layout: post
title: "OS Structure"
date: 2026-01-28 00:00:00 +0900
author: kang
categories: [OS, Basic]
tags: [OS, Basic, Kernel, Resources, System Calls, Core Services, ATmega, GUI, CLI]
pin: false
math: true
mermaid: true

---

# ðŸ§  Operating System Basics â€” Kernel, Resources, System Calls, and Core Services

> A developerâ€‘oriented overview of **what an Operating System (OS) does**,  
> how it manages **resources**, enforces **protection**, and provides **core system services**.

---

# 1ï¸âƒ£ What Is an Operating System?

An **Operating System (OS)** is software that **manages hardware resources** and provides a **safe execution environment** for programs.

### System Resources
Resources are everything needed to run programs:
- CPU time
- Memory
- Storage
- I/O devices
- Files
- Processes & threads

> Without an OS, programs must **access hardware directly** â€” complex, unsafe, and errorâ€‘prone.

---

# 2ï¸âƒ£ User Space vs Kernel Space

| Area | Purpose | Access Level |
|------|--------|-------------|
| **User Space** | Normal applications | Restricted |
| **Kernel Space** | OS core (hardware & memory control) | Full control |

- The **kernel is loaded into memory** at boot.
- Applications **cannot directly access hardware**.

---

# 3ï¸âƒ£ Why We Need an OS (Embedded vs OS Example)

### Bareâ€‘Metal Example (No OS â€” ATmega)

```cpp
#define DDRA  (*(volatile unsigned char*)0x3A)
#define PORTA (*(volatile unsigned char*)0x3B)

int main(void)
{
    DDRA = 0x01;
    PORTA = 0x01; // LED ON

    while (1) {
        // Infinite loop (no OS â†’ no process scheduling or exit)
    }
}
```

### Key Insight
- No multitasking
- No memory protection
- No process isolation
- Direct hardware register access

ðŸ‘‰ An OS **abstracts hardware** and **adds safety + multitasking**.

---

# 4ï¸âƒ£ Kernel â€” The Core of the OS

The **kernel** is responsible for:
- Resource management
- Process scheduling
- Memory management
- Device & driver control
- System call handling

> The kernel is the **only software allowed to fully control hardware**.

---

# 5ï¸âƒ£ User Interface (UI)

The OS provides user interaction through:
- **GUI (Graphical User Interface)** â€” Windows, macOS, Linux desktop
- **CLI (Command Line Interface)** â€” Bash, PowerShell, Terminal

---

# 6ï¸âƒ£ OS Core Services

## 6.1 Process Management
- Creating, scheduling, and terminating processes
- Context switching
- Multitasking

## 6.2 CPU Scheduling
- Decides **which process runs next**
- Controls **priority and CPU share**

## 6.3 Memory Management
- Allocation & deallocation
- Paging & swapping
- Virtual memory
- Memory protection

## 6.4 I/O Device Management
- Controls access to disks, keyboard, network, GPU
- Buffers, queues, interrupt handling

## 6.5 File System Management
- Stores data as files
- Directory & permission handling
- Storage abstraction

---

# 7ï¸âƒ£ System Calls & Dual Mode (Protection Mechanism)

Applications **cannot directly access hardware**.

Instead:
> They request services from the OS via **System Calls**.

---

## Dual Mode Operation

| Mode | Privileges | Purpose |
|------|---------|--------|
| **User Mode** | Limited | Run normal programs |
| **Kernel Mode** | Full | Access hardware & memory |

- Controlled by **Supervisor Flag** in CPU status register
- Prevents malicious or buggy apps from harming system

---

## System Call â€” How Apps Enter Kernel Mode

> A **System Call** is a controlled entry into kernel mode.

### Example Flow
```
User Program
  â†“ system call
Kernel Mode
  â†“ access hardware / memory
Return to User Mode
```

### Examples
- `read()` â€” file input
- `write()` â€” file output
- `fork()` â€” create process
- `malloc()` â€” request memory

ðŸ‘‰ System calls act like a **software interrupt**.

---

# 8ï¸âƒ£ OS Responsibilities Summary

| Category | OS Role |
|--------|--------|
| CPU | Scheduling & multitasking |
| Memory | Allocation, protection, paging |
| Storage | File system & disk management |
| Devices | Drivers & I/O control |
| Security | Access control & isolation |
| Processes | Lifecycle management |

---

# 9ï¸âƒ£ Developer Takeaways

âœ” OS prevents direct unsafe hardware access  
âœ” Kernel enforces **security & isolation**  
âœ” System calls bridge **user apps â†” kernel**  
âœ” OS scheduling determines **performance & responsiveness**  
âœ” Embedded systems without OS behave very differently  

---

# ðŸ§© Oneâ€‘Line Mental Model

> **The Operating System is the manager that safely shares hardware among all programs.**